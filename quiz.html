<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Quiz Kurde</title>
  <link rel="stylesheet" href="assets/css/style.css">
  <link rel="icon" type="image/png" href="https://upload.wikimedia.org/wikipedia/commons/thumb/3/35/Flag_of_Kurdistan.svg/32px-Flag_of_Kurdistan.svg.png">
  <style>
    #quiz-container {
      background: #f9fcff;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      max-width: 600px;
      margin: auto;
    }
    .correct { background-color: #d4edda; border-left: 5px solid #28a745; padding: 10px; }
    .incorrect { background-color: #f8d7da; border-left: 5px solid #dc3545; padding: 10px; }
    .option { cursor: pointer; padding: 10px; margin-bottom: 5px; border: 1px solid #ccc; border-radius: 5px; }
    .option:hover { background-color: #f0f0f0; }
    #score-board { margin-top: 20px; font-weight: bold; }
    #restart-btn { margin-top: 20px; display: none; }
  #progress-bar {
  height: 10px;
  background-color: #d9edf7;
  border-radius: 5px;
  margin-top: 20px;
  overflow: hidden;
}
#progress {
  height: 100%;
  background-color: #4caf50;
  width: 0%;
  transition: width 0.5s ease-in-out;
  display: flex;
  align-items: center;
  justify-content: flex-end;
  color: white;
  font-size: 12px;
  font-weight: bold;
  padding-right: 5px;
  border-radius: 5px;
}
.option.selected { background-color: #dceefb; font-weight: bold; transform: scale(1.05); transition: transform 0.2s ease; }
.big-btn {
  font-size: 1.3em;
  padding: 18px 40px;
  border-radius: 12px;
  background: #1a7f37;
  color: #fff;
  border: none;
  margin: 20px auto 0 auto;
  display: block;
  font-weight: bold;
  box-shadow: 0 2px 8px #0001;
  transition: background 0.2s, transform 0.1s;
  cursor: pointer;
}
.big-btn:hover, .lang-btn.selected, .cat-btn.selected {
  background: #145c28;
  transform: scale(1.05);
}
.lang-btn, .cat-btn {
  font-size: 1.1em;
  padding: 16px 32px;
  border-radius: 10px;
  background: #e6f7ff;
  color: #1a3a7f;
  border: 2px solid #1a3a7f;
  margin: 0 10px 10px 0;
  font-weight: bold;
  cursor: pointer;
  transition: background 0.2s, color 0.2s, transform 0.1s;
}
.lang-btn.selected, .cat-btn.selected {
  background: #1a3a7f;
  color: #fff;
}
@media (max-width: 600px) {
  .big-btn, .lang-btn, .cat-btn { width: 100%; min-width: 0; }
  #categorie-choices { flex-direction: column; align-items: center; }
}
</style>
<audio id="sound-correct" src="https://cdn.pixabay.com/audio/2021/08/04/audio_62bfe452a0.mp3"></audio>
<audio id="sound-wrong" src="https://cdn.pixabay.com/audio/2022/03/24/audio_3bfb3cb0aa.mp3"></audio>
<style>
.fade-in {
  animation: fadeIn 0.6s ease-in;
}
@keyframes fadeIn {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}
</style>
</head>
<body>
  <header style="background:#b8001c;">
    <h1><img src="https://upload.wikimedia.org/wikipedia/commons/3/35/Flag_of_Kurdistan.svg" alt="Drapeau kurde" style="height:40px;vertical-align:middle;margin-right:10px;">Les Kurdes : Histoire, Culture et Langues</h1>
    <nav>
      <a id="nav-history" href="index.html">Histoire</a>
      <a href="groupes.html">Groupes Kurdes</a>
      <a href="langues.html">Langues</a>
      <a href="apprendre.html">Apprendre</a>
      <a href="quiz.html" class="active">Quiz</a>
      <a id="nav-about" href="a-propos.html">√Ä propos de moi</a>
    </nav>
  </header>
  <main>
    <section id="quiz">
      <h2>Quiz interactif : Testez vos connaissances en kurde</h2>
      <div id="quiz-container">
        <!-- √âcran d'accueil -->
        <div id="screen-home">
          <button id="btn-begin" class="big-btn">Commencer</button>
        </div>
        <!-- √âcran choix langue -->
        <div id="screen-langue" style="display:none;">
          <h3>Choisissez la langue</h3>
          <div style="display:flex;gap:20px;justify-content:center;margin:30px 0;">
            <button class="lang-btn big-btn" data-lang="kurmanji">Kurmanji</button>
            <button class="lang-btn big-btn" data-lang="zazaki">Zazaki</button>
          </div>
          <button id="btn-lang-next" class="big-btn" style="display:none;">Suivant</button>
        </div>
        <!-- √âcran choix cat√©gorie -->
        <div id="screen-categorie" style="display:none;">
          <h3>Choisissez la cat√©gorie</h3>
          <div id="categorie-choices" style="display:flex;gap:20px;justify-content:center;flex-wrap:wrap;margin:30px 0;"></div>
          <button id="btn-cat-next" class="big-btn" style="display:none;">D√©marrer le quiz</button>
        </div>
        <!-- √âcran quiz -->
        <div id="screen-quiz" style="display:none;">
          <div id="progress-bar"><div id="progress"></div></div>
          <div id="quiz-progress" style="margin:10px 0 10px 0;font-weight:bold;"></div>
          <div id="quiz-question" style="margin-top:20px;font-weight:bold;"></div>
          <div id="quiz-answers"></div>
          <div id="quiz-result" style="margin-top:20px;font-weight:bold;"></div>
          <div id="score-board"></div>
          <div id="feedback" style="margin-top:15px;font-size:1.1em;"></div>
        </div>
        <!-- √âcran fin -->
        <div id="screen-end" style="display:none;text-align:center;">
          <div id="end-result" style="font-size:1.3em;margin:20px 0;"></div>
          <button id="btn-restart" class="big-btn">Recommencer</button>
        </div>
      </div>
    </section>
  </main>
  <footer style="background:#b8001c; color:white;">
    <p>2025 - Tous droits r√©serv√©s</p>
  </footer>
  <script src="assets/js/chatbot.js"></script>
  <script>
    // D√©finition brute des questions (√©chantillon, structure extensible)
    const rawQuestions = {
      kurmanji: {
        vocabulaire: [
          { type: 'qcm', question: "Comment dit-on 'pomme' ?", options: ["S√™v", "Kit√™b", "√áay"], answer: "S√™v" },
          { type: 'qcm', question: "Que signifie 'mal' ?", options: ["Maison", "Chien", "Livre"], answer: "Maison" },
          { type: 'qcm', question: "Comment dit-on 'eau' ?", options: ["Av", "Nan", "√áay"], answer: "Av" },
          { type: 'qcm', question: "Comment dit-on 'pain' ?", options: ["Nan", "S√™v", "√áay"], answer: "Nan" },
          { type: 'qcm', question: "Que signifie 'kit√™b' ?", options: ["Livre", "Pomme", "Maison"], answer: "Livre" },
          { type: 'qcm', question: "Comment dit-on 'fromage' ?", options: ["Pen√Ær", "√áay", "S√™v"], answer: "Pen√Ær" },
          { type: 'qcm', question: "Que signifie '√ßay' ?", options: ["Th√©", "Pain", "Eau"], answer: "Th√©" },
          { type: 'qcm', question: "Comment dit-on 'chat' ?", options: ["Pis√Æk", "K√ª√ßik", "√áay"], answer: "Pis√Æk" },
          { type: 'qcm', question: "Que signifie 'k√ª√ßik' ?", options: ["Chien", "Chat", "Livre"], answer: "Chien" },
          { type: 'qcm', question: "Comment dit-on 'fleur' ?", options: ["Gul", "S√™v", "√áay"], answer: "Gul" },
          { type: 'qcm', question: "Que signifie '√ßiya' ?", options: ["Montagne", "Rivi√®re", "Maison"], answer: "Montagne" },
          { type: 'qcm', question: "Comment dit-on 'soleil' ?", options: ["Tav", "Av", "Nan"], answer: "Tav" },
          { type: 'qcm', question: "Que signifie 'berf' ?", options: ["Neige", "Vent", "Fleur"], answer: "Neige" },
          { type: 'qcm', question: "Comment dit-on 'vent' ?", options: ["Ba", "Berf", "√áay"], answer: "Ba" },
          { type: 'qcm', question: "Que signifie 'dil' ?", options: ["C≈ìur", "Main", "T√™te"], answer: "C≈ìur" },
          { type: 'qcm', question: "Comment dit-on 'main' ?", options: ["Dest", "Dil", "√áav"], answer: "Dest" },
          { type: 'qcm', question: "Que signifie '√ßav' ?", options: ["≈íil", "Main", "Pied"], answer: "≈íil" },
          { type: 'qcm', question: "Comment dit-on 'pied' ?", options: ["Ling", "√áav", "Dest"], answer: "Ling" },
          { type: 'qcm', question: "Que signifie 'por' ?", options: ["Cheveux", "T√™te", "Main"], answer: "Cheveux" },
          { type: 'qcm', question: "Comment dit-on 't√™te' ?", options: ["Ser", "Por", "Ling"], answer: "Ser" },
          { type: 'qcm', question: "Que signifie 'mas√™' ?", options: ["Table", "Chaise", "Porte"], answer: "Table" },
          { type: 'qcm', question: "Comment dit-on 'chaise' ?", options: ["Kurs√Æ", "Mas√™", "Der√Æ"], answer: "Kurs√Æ" },
          { type: 'qcm', question: "Que signifie 'der√Æ' ?", options: ["Porte", "Fen√™tre", "Chaise"], answer: "Porte" },
          { type: 'qcm', question: "Comment dit-on 'fen√™tre' ?", options: ["Pencere", "Der√Æ", "Mas√™"], answer: "Pencere" },
          { type: 'qcm', question: "Que signifie 'bazirg√¢n' ?", options: ["Commer√ßant", "Professeur", "M√©decin"], answer: "Commer√ßant" },
          { type: 'qcm', question: "Comment dit-on 'professeur' ?", options: ["Mamoste", "Bij√Æ≈ük", "Bazirg√¢n"], answer: "Mamoste" },
          { type: 'qcm', question: "Que signifie 'bij√Æ≈ük' ?", options: ["M√©decin", "Ouvrier", "Professeur"], answer: "M√©decin" },
          { type: 'qcm', question: "Comment dit-on 'ouvrier' ?", options: ["Karker", "Bij√Æ≈ük", "Mamoste"], answer: "Karker" },
          { type: 'qcm', question: "Que signifie 'jotkar' ?", options: ["Paysan", "Ouvrier", "Commer√ßant"], answer: "Paysan" },
          { type: 'qcm', question: "Comment dit-on 'fruit' ?", options: ["F√™k√Æ", "Sebze", "Nan"], answer: "F√™k√Æ" },
          { type: 'qcm', question: "Que signifie 'sebze' ?", options: ["L√©gume", "Fruit", "Pain"], answer: "L√©gume" }
        ],
        phrases: [
          { type: 'phrase', question: "Reconstituez : Je t'aime", phrase: "Ez hej te dikim", words: ["Ez", "hej", "te", "dikim"] },
          { type: 'qcm', question: "Comment dit-on 'Comment vas-tu ?' ?", options: ["Tu √ßawa y√Æ ?", "Ez ba≈ü im", "Ez dixwim"], answer: "Tu √ßawa y√Æ ?" },
          { type: 'phrase', question: "Reconstituez : Je vais bien", phrase: "Ez ba≈ü im", words: ["Ez", "ba≈ü", "im"] },
          { type: 'phrase', question: "Reconstituez : Je mange du pain", phrase: "Ez nan√™ dixwim", words: ["Ez", "nan√™", "dixwim"] },
          { type: 'phrase', question: "Reconstituez : O√π est la maison ?", phrase: "Mal li ku ye ?", words: ["Mal", "li", "ku", "ye", "?"] },
          { type: 'phrase', question: "Reconstituez : Merci beaucoup !", phrase: "Supas gelek !", words: ["Supas", "gelek", "!"] },
          { type: 'phrase', question: "Reconstituez : Le professeur parle avec l'√©l√®ve", phrase: "Mamoste bi xwendekar re diaxiv√™", words: ["Mamoste", "bi", "xwendekar", "re", "diaxiv√™"] },
          { type: 'phrase', question: "Reconstituez : La montagne est belle", phrase: "√áiya bedew e", words: ["√áiya", "bedew", "e"] },
          { type: 'phrase', question: "Reconstituez : Je veux apprendre le kurde", phrase: "Ez dixwazim kurd√Æ f√™r bibim", words: ["Ez", "dixwazim", "kurd√Æ", "f√™r", "bibim"] },
          { type: 'phrase', question: "Reconstituez : Nous sommes heureux", phrase: "Em be≈üdar in", words: ["Em", "be≈üdar", "in"] },
          { type: 'phrase', question: "Reconstituez : Je ne comprends pas", phrase: "Ez f√™m nakim", words: ["Ez", "f√™m", "nakim"] },
          { type: 'phrase', question: "Reconstituez : Tu parles kurde ?", phrase: "Tu kurd√Æ diaxiv√Æ ?", words: ["Tu", "kurd√Æ", "diaxiv√Æ", "?"] },
          { type: 'phrase', question: "Reconstituez : Il lit un livre", phrase: "Ew kit√™bek dixw√Æne", words: ["Ew", "kit√™bek", "dixw√Æne"] },
          { type: 'phrase', question: "Reconstituez : Nous allons √† l'√©cole", phrase: "Em di√ßin dibistan√™", words: ["Em", "di√ßin", "dibistan√™"] },
          { type: 'phrase', question: "Reconstituez : Je veux boire du th√©", phrase: "Ez dixwazim √ßay vexwim", words: ["Ez", "dixwazim", "√ßay", "vexwim"] },
          { type: 'phrase', question: "Reconstituez : Il fait froid aujourd'hui", phrase: "√éro sar e", words: ["√éro", "sar", "e"] },
          { type: 'phrase', question: "Reconstituez : C'est facile", phrase: "Ev h√™san e", words: ["Ev", "h√™san", "e"] },
          { type: 'phrase', question: "Reconstituez : Je suis fatigu√©", phrase: "Ez westiyay√Æ me", words: ["Ez", "westiyay√Æ", "me"] },
          { type: 'phrase', question: "Reconstituez : Il est m√©decin", phrase: "Ew bij√Æ≈ük e", words: ["Ew", "bij√Æ≈ük", "e"] },
          { type: 'phrase', question: "Reconstituez : Nous habitons √† Diyarbakir", phrase: "Em li Amed√™ dij√Æn", words: ["Em", "li", "Amed√™", "dij√Æn"] },
          { type: 'phrase', question: "Reconstituez : Je veux aller au march√©", phrase: "Ez dixwazim bazar√™ bi√ßim", words: ["Ez", "dixwazim", "bazar√™", "bi√ßim"] },
          { type: 'phrase', question: "Reconstituez : Il fait beau", phrase: "Hava ba≈ü e", words: ["Hava", "ba≈ü", "e"] },
          { type: 'phrase', question: "Reconstituez : Je suis √©tudiant", phrase: "Ez xwendekar im", words: ["Ez", "xwendekar", "im"] },
          { type: 'phrase', question: "Reconstituez : Tu es professeur", phrase: "Tu mamoste y√Æ", words: ["Tu", "mamoste", "y√Æ"] },
          { type: 'phrase', question: "Reconstituez : Il est commer√ßant", phrase: "Ew bazirg√¢n e", words: ["Ew", "bazirg√¢n", "e"] },
          { type: 'phrase', question: "Reconstituez : Nous sommes amis", phrase: "Em heval in", words: ["Em", "heval", "in"] },
          { type: 'phrase', question: "Reconstituez : Je suis content", phrase: "Ez k√™fxwe≈ü im", words: ["Ez", "k√™fxwe≈ü", "im"] },
          { type: 'phrase', question: "Reconstituez : Tu es triste", phrase: "Tu xemg√Æn y√Æ", words: ["Tu", "xemg√Æn", "y√Æ"] },
          { type: 'phrase', question: "Reconstituez : Il est fatigu√©", phrase: "Ew westiyay√Æ ye", words: ["Ew", "westiyay√Æ", "ye"] },
          { type: 'phrase', question: "Reconstituez : Nous sommes en vacances", phrase: "Em di p√™≈üve√ß√ªn√™ ne", words: ["Em", "di", "p√™≈üve√ß√ªn√™", "ne"] }
        ],
        conjugaisons: [
          { type: 'qcm', question: "Conjuguez '√™tre' √† la 1√®re personne du singulier (pr√©sent)", options: ["Ez im", "Ez in", "Ez √Æ"], answer: "Ez im" },
          { type: 'qcm', question: "Conjuguez 'avoir' √† la 2√®me personne du singulier (pr√©sent)", options: ["Te heye", "Ez heye", "Em heye"], answer: "Te heye" },
          { type: 'qcm', question: "Conjuguez 'faire' √† la 3√®me personne du singulier (pr√©sent)", options: ["Ew dike", "Ew dikim", "Ew dik√Æ"], answer: "Ew dike" },
          { type: 'qcm', question: "Conjuguez 'aller' √† la 1√®re personne du pluriel (pr√©sent)", options: ["Em di√ßin", "Em di√ßim", "Em di√ße"], answer: "Em di√ßin" },
          { type: 'qcm', question: "Conjuguez 'venir' √† la 2√®me personne du singulier (pr√©sent)", options: ["Tu t√™y√Æ", "Tu t√™", "Tu t√™ne"], answer: "Tu t√™y√Æ" },
          { type: 'qcm', question: "Conjuguez 'dire' √† la 1√®re personne du singulier (pr√©sent)", options: ["Ez dib√™jim", "Ez dib√™j√Æ", "Ez dib√™je"], answer: "Ez dib√™jim" },
          { type: 'qcm', question: "Conjuguez 'voir' √† la 2√®me personne du pluriel (pr√©sent)", options: ["H√ªn dib√Ænin", "H√ªn dib√Ænim", "H√ªn dib√Æna"], answer: "H√ªn dib√Ænin" },
          { type: 'qcm', question: "Conjuguez 'pouvoir' √† la 1√®re personne du singulier (pr√©sent)", options: ["Ez dikarim", "Ez dikar√Æ", "Ez dikare"], answer: "Ez dikarim" },
          { type: 'qcm', question: "Conjuguez 'devoir' √† la 3√®me personne du pluriel (pr√©sent)", options: ["Ewan div√™", "Ewan divin", "Ewan dive"], answer: "Ewan div√™" },
          { type: 'qcm', question: "Conjuguez '√™tre' √† la 2√®me personne du singulier (pass√©)", options: ["Tu b√ªy√Æ", "Tu b√ª", "Tu b√ªm"], answer: "Tu b√ªy√Æ" },
          { type: 'qcm', question: "Conjuguez 'avoir' √† la 1√®re personne du pluriel (pass√©)", options: ["Em heb√ªn", "Em heb√ªm", "Em heb√ªy√Æ"], answer: "Em heb√ªn" },
          { type: 'qcm', question: "Conjuguez 'faire' √† la 2√®me personne du singulier (pass√©)", options: ["Tu kir√Æ", "Tu kirim", "Tu kiri"], answer: "Tu kir√Æ" },
          { type: 'qcm', question: "Conjuguez 'aller' √† la 3√®me personne du singulier (pass√©)", options: ["Ew √ß√ª", "Ew √ß√ªm", "Ew √ß√ªy√Æ"], answer: "Ew √ß√ª" },
          { type: 'qcm', question: "Conjuguez 'venir' √† la 1√®re personne du singulier (pass√©)", options: ["Ez hatim", "Ez hat√Æ", "Ez hat"], answer: "Ez hatim" },
          { type: 'qcm', question: "Conjuguez 'dire' √† la 2√®me personne du pluriel (pass√©)", options: ["H√ªn gotin", "H√ªn got", "H√ªn got√Æ"], answer: "H√ªn gotin" },
          { type: 'qcm', question: "Conjuguez 'voir' √† la 3√®me personne du pluriel (pass√©)", options: ["Ewan d√Ætin", "Ewan d√Æt", "Ewan d√Æt√Æ"], answer: "Ewan d√Ætin" },
          { type: 'qcm', question: "Conjuguez 'pouvoir' √† la 2√®me personne du singulier (pass√©)", options: ["Tu dikar√Æ", "Tu dikar√Æy√Æ", "Tu dikar√Æye"], answer: "Tu dikar√Æ" },
          { type: 'qcm', question: "Conjuguez 'devoir' √† la 1√®re personne du singulier (pass√©)", options: ["Ez div√™ b√ªm", "Ez div√™ b√ª", "Ez div√™ b√ªy√Æ"], answer: "Ez div√™ b√ªm" },
          { type: 'qcm', question: "Conjuguez '√™tre' √† la 3√®me personne du pluriel (futur)", options: ["Ewan d√™ bin", "Ewan d√™ bibe", "Ewan d√™ bibe"], answer: "Ewan d√™ bin" },
          { type: 'qcm', question: "Conjuguez 'avoir' √† la 2√®me personne du pluriel (futur)", options: ["H√ªn d√™ hebe", "H√ªn d√™ hebin", "H√ªn d√™ heb√Æ"], answer: "H√ªn d√™ hebe" },
          { type: 'qcm', question: "Conjuguez 'faire' √† la 1√®re personne du singulier (futur)", options: ["Ez d√™ bikim", "Ez d√™ bik√Æ", "Ez d√™ bike"], answer: "Ez d√™ bikim" },
          { type: 'qcm', question: "Conjuguez 'aller' √† la 2√®me personne du singulier (futur)", options: ["Tu d√™ bi√ß√Æ", "Tu d√™ bi√ßim", "Tu d√™ bi√ße"], answer: "Tu d√™ bi√ß√Æ" },
          { type: 'qcm', question: "Conjuguez 'venir' √† la 3√®me personne du singulier (futur)", options: ["Ew d√™ b√™", "Ew d√™ b√™je", "Ew d√™ b√™"], answer: "Ew d√™ b√™" },
          { type: 'qcm', question: "Conjuguez 'dire' √† la 1√®re personne du pluriel (futur)", options: ["Em d√™ bib√™jin", "Em d√™ bib√™j√Æ", "Em d√™ bib√™je"], answer: "Em d√™ bib√™jin" },
          { type: 'qcm', question: "Conjuguez 'voir' √† la 2√®me personne du singulier (futur)", options: ["Tu d√™ bib√Æn√Æ", "Tu d√™ bib√Ænim", "Tu d√™ bib√Æne"], answer: "Tu d√™ bib√Æn√Æ" },
          { type: 'qcm', question: "Conjuguez 'pouvoir' √† la 3√®me personne du pluriel (futur)", options: ["Ewan d√™ bikarin", "Ewan d√™ bikar√Æ", "Ewan d√™ bikare"], answer: "Ewan d√™ bikarin" },
          { type: 'qcm', question: "Conjuguez 'devoir' √† la 2√®me personne du singulier (futur)", options: ["Tu d√™ div√™", "Tu d√™ dive", "Tu d√™ divin"], answer: "Tu d√™ div√™" }
        ]
      },
      zazaki: {
        vocabulaire: [
          { type: 'qcm', question: "Comment dit-on 'pomme' ?", options: ["S√™v", "Kit√™b", "√áay"], answer: "S√™v" },
          { type: 'qcm', question: "Que signifie 'mal' ?", options: ["Maison", "Chien", "Livre"], answer: "Maison" },
          { type: 'qcm', question: "Comment dit-on 'eau' ?", options: ["Av", "Nan", "√áay"], answer: "Av" },
          { type: 'qcm', question: "Comment dit-on 'pain' ?", options: ["Nan", "S√™v", "√áay"], answer: "Nan" },
          { type: 'qcm', question: "Que signifie 'kit√™b' ?", options: ["Livre", "Pomme", "Maison"], answer: "Livre" },
          { type: 'qcm', question: "Comment dit-on 'fromage' ?", options: ["Pen√Ær", "√áay", "S√™v"], answer: "Pen√Ær" },
          { type: 'qcm', question: "Que signifie '√ßay' ?", options: ["Th√©", "Pain", "Eau"], answer: "Th√©" },
          { type: 'qcm', question: "Comment dit-on 'chat' ?", options: ["Pis√Æk", "K√ª√ßik", "√áay"], answer: "Pis√Æk" },
          { type: 'qcm', question: "Que signifie 'k√ª√ßik' ?", options: ["Chien", "Chat", "Livre"], answer: "Chien" },
          { type: 'qcm', question: "Comment dit-on 'fleur' ?", options: ["Gul", "S√™v", "√áay"], answer: "Gul" },
          { type: 'qcm', question: "Que signifie '√ßiya' ?", options: ["Montagne", "Rivi√®re", "Maison"], answer: "Montagne" },
          { type: 'qcm', question: "Comment dit-on 'soleil' ?", options: ["Tav", "Av", "Nan"], answer: "Tav" },
          { type: 'qcm', question: "Que signifie 'berf' ?", options: ["Neige", "Vent", "Fleur"], answer: "Neige" },
          { type: 'qcm', question: "Comment dit-on 'vent' ?", options: ["Ba", "Berf", "√áay"], answer: "Ba" },
          { type: 'qcm', question: "Que signifie 'dil' ?", options: ["C≈ìur", "Main", "T√™te"], answer: "C≈ìur" },
          { type: 'qcm', question: "Comment dit-on 'main' ?", options: ["Dest", "Dil", "√áav"], answer: "Dest" },
          { type: 'qcm', question: "Que signifie '√ßav' ?", options: ["≈íil", "Main", "Pied"], answer: "≈íil" },
          { type: 'qcm', question: "Comment dit-on 'pied' ?", options: ["Ling", "√áav", "Dest"], answer: "Ling" },
          { type: 'qcm', question: "Que signifie 'por' ?", options: ["Cheveux", "T√™te", "Main"], answer: "Cheveux" },
          { type: 'qcm', question: "Comment dit-on 't√™te' ?", options: ["Ser", "Por", "Ling"], answer: "Ser" },
          { type: 'qcm', question: "Que signifie 'mas√™' ?", options: ["Table", "Chaise", "Porte"], answer: "Table" },
          { type: 'qcm', question: "Comment dit-on 'chaise' ?", options: ["Kurs√Æ", "Mas√™", "Der√Æ"], answer: "Kurs√Æ" },
          { type: 'qcm', question: "Que signifie 'der√Æ' ?", options: ["Porte", "Fen√™tre", "Chaise"], answer: "Porte" },
          { type: 'qcm', question: "Comment dit-on 'fen√™tre' ?", options: ["Pencere", "Der√Æ", "Mas√™"], answer: "Pencere" },
          { type: 'qcm', question: "Que signifie 'bazirg√¢n' ?", options: ["Commer√ßant", "Professeur", "M√©decin"], answer: "Commer√ßant" },
          { type: 'qcm', question: "Comment dit-on 'professeur' ?", options: ["Mamoste", "Bij√Æ≈ük", "Bazirg√¢n"], answer: "Mamoste" },
          { type: 'qcm', question: "Que signifie 'bij√Æ≈ük' ?", options: ["M√©decin", "Ouvrier", "Professeur"], answer: "M√©decin" },
          { type: 'qcm', question: "Comment dit-on 'ouvrier' ?", options: ["Karker", "Bij√Æ≈ük", "Mamoste"], answer: "Karker" },
          { type: 'qcm', question: "Que signifie 'jotkar' ?", options: ["Paysan", "Ouvrier", "Commer√ßant"], answer: "Paysan" },
          { type: 'qcm', question: "Comment dit-on 'fruit' ?", options: ["F√™k√Æ", "Sebze", "Nan"], answer: "F√™k√Æ" },
          { type: 'qcm', question: "Que signifie 'sebze' ?", options: ["L√©gume", "Fruit", "Pain"], answer: "L√©gume" }
        ],
        phrases: [
          { type: 'phrase', question: "Reconstituez : Je t'aime", phrase: "Ez ≈üƒ±ma hez dƒ±kƒ±m", words: ["Ez", "≈üƒ±ma", "hez", "dƒ±kƒ±m"] },
          { type: 'qcm', question: "Comment dit-on 'Comment vas-tu ?' ?", options: ["Tu √ßƒ± way√Æ ?", "Ez ba≈ü im", "Ez xwarim"], answer: "Tu √ßƒ± way√Æ ?" },
          { type: 'phrase', question: "Reconstituez : Je vais bien", phrase: "Ez ba≈ü im", words: ["Ez", "ba≈ü", "im"] },
          { type: 'phrase', question: "Reconstituez : Je mange du pain", phrase: "Ez nan√™ dixwim", words: ["Ez", "nan√™", "dixwim"] },
          { type: 'phrase', question: "Reconstituez : O√π est la maison ?", phrase: "Mal li ku ye ?", words: ["Mal", "li", "ku", "ye", "?"] },
          { type: 'phrase', question: "Reconstituez : Merci beaucoup !", phrase: "Supas gelek !", words: ["Supas", "gelek", "!"] },
          { type: 'phrase', question: "Reconstituez : Le professeur parle avec l'√©l√®ve", phrase: "Mamoste bi xwendekar re diaxiv√™", words: ["Mamoste", "bi", "xwendekar", "re", "diaxiv√™"] },
          { type: 'phrase', question: "Reconstituez : La montagne est belle", phrase: "√áiya bedew e", words: ["√áiya", "bedew", "e"] },
          { type: 'phrase', question: "Reconstituez : Je veux apprendre le kurde", phrase: "Ez dixwazim kurd√Æ f√™r bibim", words: ["Ez", "dixwazim", "kurd√Æ", "f√™r", "bibim"] },
          { type: 'phrase', question: "Reconstituez : Nous sommes heureux", phrase: "Em be≈üdar in", words: ["Em", "be≈üdar", "in"] },
          { type: 'phrase', question: "Reconstituez : Je ne comprends pas", phrase: "Ez f√™m nakim", words: ["Ez", "f√™m", "nakim"] },
          { type: 'phrase', question: "Reconstituez : Tu parles kurde ?", phrase: "Tu kurd√Æ diaxiv√Æ ?", words: ["Tu", "kurd√Æ", "diaxiv√Æ", "?"] },
          { type: 'phrase', question: "Reconstituez : Il lit un livre", phrase: "Ew kit√™bek dixw√Æne", words: ["Ew", "kit√™bek", "dixw√Æne"] },
          { type: 'phrase', question: "Reconstituez : Nous allons √† l'√©cole", phrase: "Em di√ßin dibistan√™", words: ["Em", "di√ßin", "dibistan√™"] },
          { type: 'phrase', question: "Reconstituez : Je veux boire du th√©", phrase: "Ez dixwazim √ßay vexwim", words: ["Ez", "dixwazim", "√ßay", "vexwim"] },
          { type: 'phrase', question: "Reconstituez : Il fait froid aujourd'hui", phrase: "√éro sar e", words: ["√éro", "sar", "e"] },
          { type: 'phrase', question: "Reconstituez : C'est facile", phrase: "Ev h√™san e", words: ["Ev", "h√™san", "e"] },
          { type: 'phrase', question: "Reconstituez : Je suis fatigu√©", phrase: "Ez westiyay√Æ me", words: ["Ez", "westiyay√Æ", "me"] },
          { type: 'phrase', question: "Reconstituez : Il est m√©decin", phrase: "Ew bij√Æ≈ük e", words: ["Ew", "bij√Æ≈ük", "e"] },
          { type: 'phrase', question: "Reconstituez : Nous habitons √† Diyarbakir", phrase: "Em li Amed√™ dij√Æn", words: ["Em", "li", "Amed√™", "dij√Æn"] },
          { type: 'phrase', question: "Reconstituez : Je veux aller au march√©", phrase: "Ez dixwazim bazar√™ bi√ßim", words: ["Ez", "dixwazim", "bazar√™", "bi√ßim"] },
          { type: 'phrase', question: "Reconstituez : Il fait beau", phrase: "Hava ba≈ü e", words: ["Hava", "ba≈ü", "e"] },
          { type: 'phrase', question: "Reconstituez : Je suis √©tudiant", phrase: "Ez xwendekar im", words: ["Ez", "xwendekar", "im"] },
          { type: 'phrase', question: "Reconstituez : Tu es professeur", phrase: "Tu mamoste y√Æ", words: ["Tu", "mamoste", "y√Æ"] },
          { type: 'phrase', question: "Reconstituez : Il est commer√ßant", phrase: "Ew bazirg√¢n e", words: ["Ew", "bazirg√¢n", "e"] },
          { type: 'phrase', question: "Reconstituez : Nous sommes amis", phrase: "Em heval in", words: ["Em", "heval", "in"] },
          { type: 'phrase', question: "Reconstituez : Je suis content", phrase: "Ez k√™fxwe≈ü im", words: ["Ez", "k√™fxwe≈ü", "im"] },
          { type: 'phrase', question: "Reconstituez : Tu es triste", phrase: "Tu xemg√Æn y√Æ", words: ["Tu", "xemg√Æn", "y√Æ"] },
          { type: 'phrase', question: "Reconstituez : Il est fatigu√©", phrase: "Ew westiyay√Æ ye", words: ["Ew", "westiyay√Æ", "ye"] },
          { type: 'phrase', question: "Reconstituez : Nous sommes en vacances", phrase: "Em di p√™≈üve√ß√ªn√™ ne", words: ["Em", "di", "p√™≈üve√ß√ªn√™", "ne"] }
        ],
        conjugaisons: [
          { type: 'qcm', question: "Conjuguez '√™tre' √† la 1√®re personne du singulier (pr√©sent)", options: ["Ez im", "Ez in", "Ez √Æ"], answer: "Ez im" },
          { type: 'qcm', question: "Conjuguez 'avoir' √† la 2√®me personne du singulier (pr√©sent)", options: ["Te est√™", "Ez est√™", "Em est√™"], answer: "Te est√™" },
          { type: 'qcm', question: "Conjuguez 'faire' √† la 3√®me personne du singulier (pr√©sent)", options: ["Ew dike", "Ew dikim", "Ew dik√Æ"], answer: "Ew dike" },
          { type: 'qcm', question: "Conjuguez 'aller' √† la 1√®re personne du pluriel (pr√©sent)", options: ["Em di√ßin", "Em di√ßim", "Em di√ße"], answer: "Em di√ßin" },
          { type: 'qcm', question: "Conjuguez 'venir' √† la 2√®me personne du singulier (pr√©sent)", options: ["Tu t√™y√Æ", "Tu t√™", "Tu t√™ne"], answer: "Tu t√™y√Æ" },
          { type: 'qcm', question: "Conjuguez 'dire' √† la 1√®re personne du singulier (pr√©sent)", options: ["Ez dib√™jim", "Ez dib√™j√Æ", "Ez dib√™je"], answer: "Ez dib√™jim" },
          { type: 'qcm', question: "Conjuguez 'voir' √† la 2√®me personne du pluriel (pr√©sent)", options: ["H√ªn dib√Ænin", "H√ªn dib√Ænim", "H√ªn dib√Æna"], answer: "H√ªn dib√Ænin" },
          { type: 'qcm', question: "Conjuguez 'pouvoir' √† la 1√®re personne du singulier (pr√©sent)", options: ["Ez dikarim", "Ez dikar√Æ", "Ez dikare"], answer: "Ez dikarim" },
          { type: 'qcm', question: "Conjuguez 'devoir' √† la 3√®me personne du pluriel (pr√©sent)", options: ["Ewan div√™", "Ewan divin", "Ewan dive"], answer: "Ewan div√™" },
          { type: 'qcm', question: "Conjuguez '√™tre' √† la 2√®me personne du singulier (pass√©)", options: ["Tu b√ªy√Æ", "Tu b√ª", "Tu b√ªm"], answer: "Tu b√ªy√Æ" },
          { type: 'qcm', question: "Conjuguez 'avoir' √† la 1√®re personne du pluriel (pass√©)", options: ["Em heb√ªn", "Em heb√ªm", "Em heb√ªy√Æ"], answer: "Em heb√ªn" },
          { type: 'qcm', question: "Conjuguez 'faire' √† la 2√®me personne du singulier (pass√©)", options: ["Tu kir√Æ", "Tu kirim", "Tu kiri"], answer: "Tu kir√Æ" },
          { type: 'qcm', question: "Conjuguez 'aller' √† la 3√®me personne du singulier (pass√©)", options: ["Ew √ß√ª", "Ew √ß√ªm", "Ew √ß√ªy√Æ"], answer: "Ew √ß√ª" },
          { type: 'qcm', question: "Conjuguez 'venir' √† la 1√®re personne du singulier (pass√©)", options: ["Ez hatim", "Ez hat√Æ", "Ez hat"], answer: "Ez hatim" },
          { type: 'qcm', question: "Conjuguez 'dire' √† la 2√®me personne du pluriel (pass√©)", options: ["H√ªn gotin", "H√ªn got", "H√ªn got√Æ"], answer: "H√ªn gotin" },
          { type: 'qcm', question: "Conjuguez 'voir' √† la 3√®me personne du pluriel (pass√©)", options: ["Ewan d√Ætin", "Ewan d√Æt", "Ewan d√Æt√Æ"], answer: "Ewan d√Ætin" },
          { type: 'qcm', question: "Conjuguez 'pouvoir' √† la 2√®me personne du singulier (pass√©)", options: ["Tu dikar√Æ", "Tu dikar√Æy√Æ", "Tu dikar√Æye"], answer: "Tu dikar√Æ" },
          { type: 'qcm', question: "Conjuguez 'devoir' √† la 1√®re personne du singulier (pass√©)", options: ["Ez div√™ b√ªm", "Ez div√™ b√ª", "Ez div√™ b√ªy√Æ"], answer: "Ez div√™ b√ªm" },
          { type: 'qcm', question: "Conjuguez '√™tre' √† la 3√®me personne du pluriel (futur)", options: ["Ewan d√™ bin", "Ewan d√™ bibe", "Ewan d√™ bibe"], answer: "Ewan d√™ bin" },
          { type: 'qcm', question: "Conjuguez 'avoir' √† la 2√®me personne du pluriel (futur)", options: ["H√ªn d√™ hebe", "H√ªn d√™ hebin", "H√ªn d√™ heb√Æ"], answer: "H√ªn d√™ hebe" },
          { type: 'qcm', question: "Conjuguez 'faire' √† la 1√®re personne du singulier (futur)", options: ["Ez d√™ bikim", "Ez d√™ bik√Æ", "Ez d√™ bike"], answer: "Ez d√™ bikim" },
          { type: 'qcm', question: "Conjuguez 'aller' √† la 2√®me personne du singulier (futur)", options: ["Tu d√™ bi√ß√Æ", "Tu d√™ bi√ßim", "Tu d√™ bi√ße"], answer: "Tu d√™ bi√ß√Æ" },
          { type: 'qcm', question: "Conjuguez 'venir' √† la 3√®me personne du singulier (futur)", options: ["Ew d√™ b√™", "Ew d√™ b√™je", "Ew d√™ b√™"], answer: "Ew d√™ b√™" },
          { type: 'qcm', question: "Conjuguez 'dire' √† la 1√®re personne du pluriel (futur)", options: ["Em d√™ bib√™jin", "Em d√™ bib√™j√Æ", "Em d√™ bib√™je"], answer: "Em d√™ bib√™jin" },
          { type: 'qcm', question: "Conjuguez 'voir' √† la 2√®me personne du singulier (futur)", options: ["Tu d√™ bib√Æn√Æ", "Tu d√™ bib√Ænim", "Tu d√™ bib√Æne"], answer: "Tu d√™ bib√Æn√Æ" },
          { type: 'qcm', question: "Conjuguez 'pouvoir' √† la 3√®me personne du pluriel (futur)", options: ["Ewan d√™ bikarin", "Ewan d√™ bikar√Æ", "Ewan d√™ bikare"], answer: "Ewan d√™ bikarin" },
          { type: 'qcm', question: "Conjuguez 'devoir' √† la 2√®me personne du singulier (futur)", options: ["Tu d√™ div√™", "Tu d√™ dive", "Tu d√™ divin"], answer: "Tu d√™ div√™" }
        ]
      }
    };

    // Fonction de m√©lange
    function shuffle(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
      return array;
    }

    // G√©n√®re les questions finales avec options m√©lang√©es √† chaque lancement
    function getFullQuestions(langue, categorie) {
      if (!rawQuestions[langue] || !rawQuestions[langue][categorie]) return [];
      return rawQuestions[langue][categorie].map(q => {
        if (q.type === 'qcm') {
          return { ...q, options: shuffle([...q.options]) };
        } else if (q.type === 'phrase') {
          return { ...q, words: shuffle([...q.words]) };
        }
        return { ...q };
      });
    }

    let selectedLang = null;
    let selectedCat = null;
    let currentIndex = 0;
    let currentSet = [];
    let score = 0;
    let streak = 0;
    let totalQuestions = 0;

    // S√©lecteurs d'√©crans
    const screenHome = document.getElementById('screen-home');
    const screenLangue = document.getElementById('screen-langue');
    const screenCategorie = document.getElementById('screen-categorie');
    const screenQuiz = document.getElementById('screen-quiz');
    const screenEnd = document.getElementById('screen-end');
    // Boutons et zones
    const btnBegin = document.getElementById('btn-begin');
    const btnLangNext = document.getElementById('btn-lang-next');
    const btnCatNext = document.getElementById('btn-cat-next');
    const btnRestart = document.getElementById('btn-restart');
    const categorieChoices = document.getElementById('categorie-choices');
    const quizProgress = document.getElementById('quiz-progress');
    // Quiz zones
    const questionDiv = document.getElementById('quiz-question');
    const answersDiv = document.getElementById('quiz-answers');
    const resultDiv = document.getElementById('quiz-result');
    const scoreBoard = document.getElementById('score-board');
    const progressBar = document.getElementById('progress');
    const feedbackDiv = document.getElementById('feedback');
    const endResult = document.getElementById('end-result');
    const soundCorrect = document.getElementById('sound-correct');
    const soundWrong = document.getElementById('sound-wrong');

    // 1. Accueil
    btnBegin.onclick = () => {
      screenHome.style.display = 'none';
      screenLangue.style.display = 'block';
    };

    // 2. Choix langue
    document.querySelectorAll('.lang-btn').forEach(btn => {
      btn.onclick = () => {
        document.querySelectorAll('.lang-btn').forEach(b => b.classList.remove('selected'));
        btn.classList.add('selected');
        selectedLang = btn.getAttribute('data-lang');
        btnLangNext.style.display = 'block';
      };
    });
    btnLangNext.onclick = () => {
      screenLangue.style.display = 'none';
      // G√©n√®re les cat√©gories selon la langue (dynamique si besoin)
      categorieChoices.innerHTML = '';
      Object.keys(rawQuestions[selectedLang]).forEach(cat => {
        const btn = document.createElement('button');
        btn.className = 'cat-btn';
        btn.textContent = cat.charAt(0).toUpperCase() + cat.slice(1);
        btn.onclick = () => {
          document.querySelectorAll('.cat-btn').forEach(b => b.classList.remove('selected'));
          btn.classList.add('selected');
          selectedCat = cat;
          btnCatNext.style.display = 'block';
        };
        categorieChoices.appendChild(btn);
      });
      btnCatNext.style.display = 'none';
      screenCategorie.style.display = 'block';
    };

    // 3. Choix cat√©gorie
    btnCatNext.onclick = () => {
      screenCategorie.style.display = 'none';
      startQuiz();
    };

    // 4. Lancement du quiz
    function startQuiz() {
      let allQuestions = getFullQuestions(selectedLang, selectedCat);
      currentSet = shuffle(allQuestions).slice(0, 30);
      totalQuestions = currentSet.length;
      currentIndex = 0;
      score = 0;
      streak = 0;
      feedbackDiv.innerHTML = '';
      scoreBoard.innerHTML = '';
      resultDiv.innerHTML = '';
      progressBar.style.width = '0%';
      quizProgress.innerHTML = '';
      screenQuiz.style.display = 'block';
      showQuestion();
    }

    function showQuestion() {
      screenQuiz.style.display = 'block';
      screenEnd.style.display = 'none';
      const q = currentSet[currentIndex];
      quizProgress.innerHTML = `Question ${currentIndex + 1} / ${totalQuestions}`;
      questionDiv.textContent = q.question;
      answersDiv.innerHTML = '';
      resultDiv.innerHTML = '';
      feedbackDiv.innerHTML = '';
      progressBar.style.width = ((currentIndex) / totalQuestions * 100) + '%';
      if (q.type === 'qcm') {
        q.options.forEach(opt => {
          const btn = document.createElement('div');
          btn.className = 'option';
          btn.textContent = opt;
          btn.onclick = () => checkAnswer(opt, q.answer, btn);
          answersDiv.appendChild(btn);
        });
      } else if (q.type === 'phrase') {
        const wordContainer = document.createElement('div');
        wordContainer.style.display = 'flex';
        wordContainer.style.flexWrap = 'wrap';
        wordContainer.style.gap = '10px';
        const selected = [];
        const output = document.createElement('div');
        output.style.marginTop = '10px';
        output.style.fontWeight = 'bold';
        q.words.forEach(word => {
          const btn = document.createElement('div');
          btn.className = 'option';
          btn.textContent = word;
          btn.onclick = () => {
            selected.push(word);
            btn.style.visibility = 'hidden';
            output.textContent = selected.join(' ');
            if (selected.length === q.words.length) {
              checkAnswer(selected.join(' '), q.phrase, null, wordContainer, q.words);
            }
          };
          wordContainer.appendChild(btn);
        });
        answersDiv.appendChild(wordContainer);
        answersDiv.appendChild(output);
      }
    }

    function checkAnswer(selected, correct, btn=null, wordContainer=null, words=null) {
      let isCorrect = selected.trim() === correct.trim();
      if (isCorrect) {
        score++;
        streak++;
        soundCorrect.currentTime = 0; soundCorrect.play();
        if (btn) btn.classList.add('correct');
        if (wordContainer) wordContainer.style.background = '#d4edda';
        feedbackDiv.innerHTML = getRandomPositiveFeedback() + ' <span style="font-size:1.3em;">üéâ</span>';
      } else {
        streak = 0;
        soundWrong.currentTime = 0; soundWrong.play();
        if (btn) btn.classList.add('incorrect');
        if (wordContainer) wordContainer.style.background = '#f8d7da';
        feedbackDiv.innerHTML = getRandomNegativeFeedback() + '<br><span style="color:#b00">Bonne r√©ponse : ' + correct + '</span>';
      }
      Array.from(document.getElementsByClassName('option')).forEach(b => b.onclick = null);
      setTimeout(() => {
        currentIndex++;
        progressBar.style.width = ((currentIndex) / totalQuestions * 100) + '%';
        if (currentIndex < totalQuestions) {
          showQuestion();
        } else {
          showResult();
        }
      }, 1200);
    }

    function showResult() {
      screenQuiz.style.display = 'none';
      screenEnd.style.display = 'block';
      endResult.innerHTML = `<span style="font-size:1.3em;">Votre score : <b>${score} / ${totalQuestions}</b></span><br>` +
        (score === totalQuestions ? '<span style="color:green;font-weight:bold;">Parfait ! üèÜ</span>' :
        score > totalQuestions/2 ? '<span style="color:orange;">Bien jou√© !</span>' :
        '<span style="color:#b00;">Continuez √† vous entra√Æner !</span>') +
        `<br>S√©rie de bonnes r√©ponses : <b>${streak}</b>`;
    }

    function getRandomPositiveFeedback() {
      const arr = [
        'Bravo !', 'Super !', 'Bien jou√© !', 'Excellent !', 'Continue comme √ßa !', 'G√©nial !', 'Parfait !', 'Tu progresses !'
      ];
      return arr[Math.floor(Math.random() * arr.length)];
    }
    function getRandomNegativeFeedback() {
      const arr = [
        'Oups...', 'Essaie encore !', 'Ce n\'est pas √ßa.', 'Presque !', 'Tu y es presque !', 'Courage !', 'Ce sera mieux la prochaine fois.'
      ];
      return arr[Math.floor(Math.random() * arr.length)];
    }

    btnRestart.onclick = () => {
      screenEnd.style.display = 'none';
      screenHome.style.display = 'block';
      selectedLang = null;
      selectedCat = null;
    };
  </script>
</body>
</html>
